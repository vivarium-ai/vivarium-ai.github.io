@import "tailwindcss";
@plugin "@tailwindcss/typography";

@layer base {
  :root { color-scheme: light dark; }
}

@custom-variant dark (&:is(html.dark *));

@theme {
  /* Solarized palette */
  --color-base03: #002b36;
  --color-base02: #073642;
  --color-base01: #586e75;
  --color-base00: #657b83;
  --color-base0:  #839496;
  --color-base1:  #93a1a1;
  --color-base2:  #eee8d5;
  --color-base3:  #fdf6e3;

  --color-yellow: #b58900;
  --color-orange: #cb4b16;
  --color-red:    #dc322f;
  --color-magenta:#d33682;
  --color-violet: #6c71c4;
  --color-blue:   #268bd2;
  --color-cyan:   #2aa198;
  --color-green:  #859900;

  /* Light defaults */
  --color-bg: var(--color-base3);
  --color-fg: var(--color-base01);
  --color-muted: var(--color-base1);
  --color-border: var(--color-base2);
  --color-primary: var(--color-blue);
  --color-primary-foreground: var(--color-base3);
}

@utility prose-compact {
  @apply prose;
}

.prose-compact :where(ul > li, ol > li) {
  margin-block: 0.1em;
}
.prose-compact :where(ul > li > :last-child, ol > li > :last-child) {
  margin-bottom: 0;
}

@layer base {
  html.dark {
    --color-bg: var(--color-base03);
    --color-fg: var(--color-base1);
  }

  html, body {
    background-color: var(--color-bg);
    color: var(--color-fg);
  }
}

@layer components {
  .prose {
    --tw-prose-body: var(--color-fg);
    --tw-prose-headings: var(--color-fg);
    --tw-prose-lead: var(--color-muted);
    --tw-prose-links: var(--color-primary);
    --tw-prose-bold: var(--color-fg);
    --tw-prose-counters: var(--color-muted);
    --tw-prose-bullets: var(--color-muted);
    --tw-prose-hr: var(--color-border);
    --tw-prose-quotes: var(--color-fg);
    --tw-prose-quote-borders: var(--color-border);
    --tw-prose-captions: var(--color-muted);

    --tw-prose-code: var(--color-violet);
    --tw-prose-pre-code: var(--color-base3);
    --tw-prose-pre-bg: var(--color-base02);

    --tw-prose-th-borders: var(--color-border);
    --tw-prose-td-borders: var(--color-border);

    /* invert set for .prose-invert */
    --tw-prose-invert-body: var(--color-base0);
    --tw-prose-invert-headings: var(--color-base0);
    --tw-prose-invert-lead: var(--color-base1);
    --tw-prose-invert-links: var(--color-primary);
    --tw-prose-invert-bold: var(--color-base0);
    --tw-prose-invert-counters: var(--color-base1);
    --tw-prose-invert-bullets: var(--color-base1);
    --tw-prose-invert-hr: var(--color-base02);
    --tw-prose-invert-quotes: var(--color-base0);
    --tw-prose-invert-quote-borders: var(--color-base02);
    --tw-prose-invert-captions: var(--color-base1);
    --tw-prose-invert-code: var(--color-yellow);
    --tw-prose-invert-pre-code: var(--color-base3);
    --tw-prose-invert-pre-bg: var(--color-base02);
    --tw-prose-invert-th-borders: var(--color-base02);
    --tw-prose-invert-td-borders: var(--color-base02);
  }
}

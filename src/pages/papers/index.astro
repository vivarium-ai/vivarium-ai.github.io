---
import SiteLayout from '@/layouts/SiteLayout.astro';

import { getCollection } from "astro:content";
const items = await getCollection("papers", (n) => n.data.published !== false);
const sorted = items.sort(
  (a, b) => new Date(b.data.date ?? 0).getTime() - new Date(a.data.date ?? 0).getTime()
);
---

<SiteLayout title="Vivarium - Blog">
  <main>
    <h1>Papers</h1>
    <ul>
      {sorted.map((item) => (
        <li>
          <a href={`/papers/${item.slug}/`}>
            {item.data.title ?? item.slug}
          </a>
          {item.data.date && <span class="block text-sm text-gray-500">{item.data.date}</span>}
        </li>
      ))}
    </ul>
  </main>
</SiteLayout>
